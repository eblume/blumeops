apiVersion: v1
kind: ConfigMap
metadata:
  name: forgejo-runner-config
  namespace: forgejo-runner
data:
  config.yaml: |
    log:
      level: info

    runner:
      file: /data/.runner
      capacity: 2
      timeout: 3h

    container:
      # Use our custom job execution image with Node.js + Docker CLI
      network: "host"
      # Connect to DinD sidecar via TCP (not socket)
      docker_host: tcp://127.0.0.1:2375
      # Set DOCKER_HOST in job containers so they can run docker commands
      env:
        DOCKER_HOST: tcp://127.0.0.1:2375
