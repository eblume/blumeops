#!/usr/bin/env bash
#MISE description="Concatenate all blumeops zettelkasten cards"

set -euo pipefail

# Blumeops docs now live in the repo itself (symlinked into zk)
DOCS_DIR="$(cd "$(dirname "$0")/.." && pwd)/docs"
MAIN_CARD="$DOCS_DIR/1767747119-YCPO.md"

# Find all files tagged with blumeops (excluding main card)
other_cards=$(grep -l '^  - blumeops$' "$DOCS_DIR"/*.md 2>/dev/null | grep -v "$(basename "$MAIN_CARD")" | sort)

# Concatenate: main card first, then others
# Pass through any args to bat (e.g., --style=header --color=never --decorations=always)
bat "$@" "$MAIN_CARD" $other_cards
