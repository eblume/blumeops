name: Test CI

on:
  push:
    branches: [main]
  pull_request:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Verify tools
        run: |
          echo "=== Node.js ==="
          node --version
          npm --version
          echo ""
          echo "=== Git ==="
          git --version
          echo ""
          echo "=== Build tools ==="
          make --version | head -1
          gcc --version | head -1
          echo ""
          echo "=== Docker ==="
          docker --version
          echo ""
          echo "=== Other tools ==="
          curl --version | head -1
          jq --version

      - name: Show repo info
        run: |
          echo "Repository: ${{ github.repository }}"
          echo "Event: ${{ github.event_name }}"
          echo "Ref: ${{ github.ref }}"
          echo "Branch: ${{ github.ref_name }}"
          echo ""
          echo "=== Files ==="
          ls -la
